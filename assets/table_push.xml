<?xml version="1.0" encoding="utf-8"?>

<mujoco>
	<compiler angle="radian" texturedir="textures/" /> <!-- meshdir="meshes/" -->
	
	<option timestep="0.001" tolerance="1e-9" integrator="implicitfast" iterations="100" ls_iterations="100">
		<flag warmstart="enable" multiccd="enable"/>
	</option>
	
	<visual>
		<global offwidth="1280" offheight="720"/>
	</visual>

	<actuator>
        <!-- Position Control -->
		<!-- kp, kv: (200,100) first 3, (100,50) last 3 -->
		<position joint="joint_1" name="joint_1" kp="200" kv="100" ctrlrange="-2.87979 2.87979" forcerange="-20 20"/>
		<position joint="joint_2" name="joint_2" kp="200" kv="100" ctrlrange="-1.91986 1.91986" forcerange="-20 20"/>
		<position joint="joint_3" name="joint_3" kp="200" kv="100" ctrlrange="-1.22173 1.91986" forcerange="-20 20"/>
		<position joint="joint_4" name="joint_4" kp="100" kv="50" ctrlrange="-2.79252 2.79252" forcerange="-10 10"/>
		<position joint="joint_5" name="joint_5" kp="100" kv="50" ctrlrange="-2.09440 2.90440" forcerange="-10 10"/>
		<position joint="joint_6" name="joint_6" kp="100" kv="50" ctrlrange="-3.14200 3.14200" forcerange="-10 10"/>
	</actuator>

	<sensor>
		<force name="force_sensor" site="sensor_site"/>
	</sensor>

	<size njmax="500" nconmax="100" />
    <asset>
        <texture type="skybox" builtin="gradient" rgb1="0.45 0.6 0.807" rgb2="0.46 0.87 0.58" width="32" height="32"></texture>
        <!-- <texture name="texture_block" file="block.png" gridsize="3 4" gridlayout=".U..LFRB.D.."></texture> -->
        <texture name="grid" type="2d" builtin="checker" rgb1=".1 .2 .3" rgb2=".2 .3 .4" width="300" height="300"/>

        <material name="floor_mat" specular="0" shininess="0.5" reflectance="0" rgba="0.2 0.2 0.2 1"></material>
        <material name="table_mat" specular="0" shininess="0.5" reflectance="0" rgba="0.93 0.93 0.93 1"></material>
        <material name="block_mat" specular="0" shininess="0.5" reflectance="0" rgba="1 0.2 0.2 1"></material>
        <material name="robot0:geomMat" shininess="0.03" specular="0.4"></material>
        <material name="robot0:gripper_finger_mat" shininess="0.03" specular="0.4" reflectance="0"></material>
        <material name="robot0:gripper_mat" shininess="0.03" specular="0.4" reflectance="0"></material>
        <material name="robot0:base_mat" shininess="0.03" specular="0.4" reflectance="0"></material>
        <material name="grid_mat" texture="grid" texrepeat="8 8" reflectance="0.2"/>

        <mesh name="base_link" file="meshes/base_link.stl" />
        <mesh name="link_1" file="meshes/link_1.stl" />
        <mesh name="link_2" file="meshes/link_2.stl" />
        <mesh name="link_3" file="meshes/link_3.stl" />
        <mesh name="link_4" file="meshes/link_4.stl" />
        <mesh name="link_5" file="meshes/link_5.stl" />
        <mesh name="link_6" file="meshes/link_6.stl" />
        <mesh name="pusher_link" file="meshes/pusher_link.stl" scale="0.001 0.001 0.001"/>
    </asset>


	<!-- v Per-object assets (meshes, mats) will inject here v -->
	{asset_block}
	<!-- ^ Per-object assets (meshes, mats) will inject here ^ -->

	<worldbody>
		<geom name="floor" size="5 5 5" type="plane" material="grid_mat"/>
		
		<!-- <camera name="closeup" pos="0 -100 .07" xyaxes="1 0 0 0 1 2"/> -->
		<include file="robot.xml"></include>
		<!-- <include file="../assets/robot.xml"></include> -->
		
		<!-- Table Surface === Recall geom SIZE is half-dims so table surface is z=0.1 -->
		<body pos="0.75 0 0" name="table0">
			<geom size="1 0.5 0.05" type="box" name="table" mass="2000" material="table_mat" friction="1 0.005 0.0001"></geom>
			<site name="surface_site" pos="0 0 0" size = "0.02 0.02 0.02" type="box" rgba="1 1 0 0"></site>
			<!-- TEMPORARY SITE -->
			<site name="obj_frame_site" pos="0 0 0.1" size="0.01" type="sphere" rgba="1 0 0 0.5"/>
			<site name="payload_site" pos="0 0 0.1" size="0.01" type="sphere" rgba="1 0 0 0.5"/>
		</body>

		<!-- v Object body will inject here v -->
		{object_block}
		<!-- ^ Object body will inject here ^ -->

		<light directional="true" ambient="0.2 0.2 0.2" diffuse="0.8 0.8 0.8" specular="0.3 0.3 0.3" castshadow="false" pos="0 0 4" dir="0 0 -1" name="light0"></light>
	</worldbody>
</mujoco>
